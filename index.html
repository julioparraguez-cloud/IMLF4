<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estrategia Mind-do: Servicios Municipales & Branding Pol√≠tico</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Plotly.js -->
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>

    <!-- Markdown Parser for AI Response -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&family=Montserrat:wght@600;800&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Roboto', 'sans-serif'],
                        heading: ['Montserrat', 'sans-serif'],
                    },
                    colors: {
                        mindBlue: '#2563EB',   // Trust / Logos
                        mindOrange: '#F97316', // Action / Pathos
                        mindCyan: '#06B6D4',   // Modernity
                        mindRed: '#EF4444',    // Crisis / Ethos
                        mindDark: '#1E293B',
                        mindLight: '#F8FAFC',
                    }
                }
            }
        }
    </script>

    <style>
        /* Chart Container Styling Rules */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 400px; /* Base height */
            max-height: 500px;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 450px;
            }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #2563EB;
            border-radius: 5px;
        }

        /* Card Hover Effects */
        .stat-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        /* Diagram Connectors (No SVG) */
        .connector-line {
            width: 2px;
            background-color: #cbd5e1;
            flex-grow: 1;
            min-height: 20px;
        }

        /* Markdown Styles for AI Output */
        .prose h3 { color: #2563EB; font-weight: bold; margin-top: 1rem; margin-bottom: 0.5rem; }
        .prose ul { list-style-type: disc; padding-left: 1.5rem; margin-bottom: 1rem; }
        .prose li { margin-bottom: 0.25rem; }
        .prose strong { color: #1E293B; }
    </style>
</head>
<body class="bg-mindLight text-slate-800 font-sans">

    <!-- Header Section -->
    <header class="bg-gradient-to-r from-mindBlue to-mindCyan text-white p-8 shadow-lg">
        <div class="max-w-7xl mx-auto">
            <h1 class="text-4xl md:text-5xl font-heading font-extrabold mb-2 tracking-tight">MIND-DO: ESTRATEGIA MUNICIPAL</h1>
            <p class="text-xl opacity-90 font-light">An√°lisis de Operaciones, Branding Pol√≠tico y Benchmarking de Servicios P√∫blicos</p>
        </div>
    </header>

    <main class="max-w-7xl mx-auto p-6 space-y-16">

        <!-- SECTION 1: THE CORE PROBLEM (THE GAP) -->
        <section>
            <div class="bg-white rounded-xl shadow-md p-8 border-l-8 border-mindOrange">
                <h2 class="text-3xl font-heading font-bold text-mindDark mb-4">El Problema: La Brecha de la Promesa</h2>
                <p class="text-lg leading-relaxed text-slate-600 mb-6">
                    En el ciclo pol√≠tico municipal, el Alcalde es elegido bajo una "Marca Personal" (Ethos) que promete un estilo de vida mejorado. Sin embargo, la operaci√≥n municipal diaria a menudo falla en entregar esa promesa. Mind-do identifica que la <strong>desconexi√≥n entre la narrativa de campa√±a y la realidad del servicio</strong> es la causa principal de la ca√≠da en aprobaci√≥n.
                </p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                    <div>
                        <div class="chart-container">
                            <canvas id="gapChart"></canvas>
                        </div>
                        <p class="text-sm text-center text-slate-500 mt-2 italic">Fig 1. Comparativa entre expectativa generada (Campa√±a) y satisfacci√≥n real (Gesti√≥n).</p>
                    </div>
                    <div class="space-y-4">
                        <div class="p-4 bg-blue-50 rounded-lg border border-blue-100">
                            <h3 class="font-bold text-mindBlue text-xl">üìâ El Costo Pol√≠tico</h3>
                            <p>Cuando la basura no se recoge o el permiso demora, no es un "fallo log√≠stico" para el vecino; es una <strong>promesa rota</strong>.</p>
                        </div>
                        <div class="p-4 bg-orange-50 rounded-lg border border-orange-100">
                            <h3 class="font-bold text-mindOrange text-xl">üõ† La Soluci√≥n Mind-do</h3>
                            <p>Transformar procesos operativos aburridos en herramientas de marketing pol√≠tico activo. La eficiencia operativa es la mejor campa√±a de reelecci√≥n.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 2: BENCHMARKING (MARKET LANDSCAPE) -->
        <section>
            <div class="mb-6">
                <h2 class="text-3xl font-heading font-bold text-mindDark border-b-4 border-mindBlue inline-block pb-2">Benchmarking de Competencia</h2>
            </div>
            <p class="mb-8 text-lg text-slate-600">
                El mercado de servicios municipales est√° fragmentado. Las "Big 4" (Consultoras) son costosas y lentas. Las "GovTech" ofrecen herramientas sin estrategia. Mind-do se posiciona en el cuadrante de <strong>Alta Alineaci√≥n Pol√≠tica y Optimizaci√≥n Operativa Espec√≠fica</strong>.
            </p>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="lg:col-span-2">
                    <div class="bg-white rounded-xl shadow-md p-6">
                        <div class="chart-container">
                            <canvas id="benchmarkChart"></canvas>
                        </div>
                    </div>
                    <p class="text-sm text-slate-500 mt-2">
                        <strong>Eje X:</strong> Costo de Implementaci√≥n | <strong>Eje Y:</strong> Enfoque Pol√≠tico/Estrat√©gico | <strong>Tama√±o:</strong> Profundidad Operativa
                    </p>
                </div>
                
                <!-- Competitor Analysis Cards (HTML Structure) -->
                <div class="space-y-4">
                    <div class="bg-white p-4 rounded-lg shadow border-l-4 border-gray-400">
                        <h4 class="font-bold text-gray-700">üè¢ Consultoras Tradicionales</h4>
                        <p class="text-sm text-gray-600">Ej: KPMG, Deloitte.</p>
                        <p class="text-xs mt-2 text-red-500 font-semibold">Debilidad: Muy caras, desconectadas del "Ethos" del Alcalde.</p>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow border-l-4 border-teal-400">
                        <h4 class="font-bold text-teal-700">üì± Apps de Reportes (GovTech)</h4>
                        <p class="text-sm text-gray-600">Ej: Sosafe, CitizenLab.</p>
                        <p class="text-xs mt-2 text-yellow-600 font-semibold">Debilidad: Solo capturan quejas, no arreglan el proceso interno.</p>
                    </div>
                    <div class="bg-gradient-to-br from-mindBlue to-mindCyan p-4 rounded-lg shadow-lg text-white transform scale-105 border-2 border-white">
                        <h4 class="font-bold text-xl">üöÄ Mind-do</h4>
                        <p class="text-sm opacity-90">Especialistas en la √∫ltima milla del servicio.</p>
                        <ul class="text-xs mt-3 list-disc pl-4 space-y-1">
                            <li>Alineaci√≥n Branding-Operaci√≥n</li>
                            <li>Gu√≠as de Servicio Claras</li>
                            <li>Costo-Eficiencia Media</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 3: THE STRATEGIC FRAMEWORK (ETHOS, PATHOS, LOGOS) -->
        <section class="bg-slate-800 text-white -mx-6 px-6 py-12 rounded-lg shadow-inner">
            <div class="max-w-5xl mx-auto">
                <div class="text-center mb-10">
                    <h2 class="text-3xl font-heading font-bold mb-4 text-mindCyan">El Tri√°ngulo de Servicio Mind-do</h2>
                    <p class="text-gray-300 max-w-2xl mx-auto">
                        Para que un servicio municipal funcione pol√≠ticamente, debe equilibrar tres factores ret√≥ricos cl√°sicos. Analizamos la "salud" de un servicio en base a estos ejes.
                    </p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
                    <!-- Conceptual HTML Diagram -->
                    <div class="space-y-6">
                        <div class="flex items-center bg-slate-700 p-4 rounded-lg border-l-4 border-yellow-400">
                            <div class="text-3xl mr-4">üëë</div>
                            <div>
                                <h3 class="font-bold text-yellow-400 text-lg">ETHOS (La Promesa)</h3>
                                <p class="text-sm text-gray-300">La credibilidad del Alcalde. ¬øEl servicio refleja los valores de la campa√±a? ¬øEs transparente?</p>
                            </div>
                        </div>
                        <div class="flex items-center bg-slate-700 p-4 rounded-lg border-l-4 border-mindBlue">
                            <div class="text-3xl mr-4">‚öôÔ∏è</div>
                            <div>
                                <h3 class="font-bold text-mindBlue text-lg">LOGOS (La Operaci√≥n)</h3>
                                <p class="text-sm text-gray-300">La l√≥gica del proceso. Gu√≠as claras, tiempos definidos, recursos optimizados. Sin Logos, el Ethos es mentira.</p>
                            </div>
                        </div>
                        <div class="flex items-center bg-slate-700 p-4 rounded-lg border-l-4 border-mindOrange">
                            <div class="text-3xl mr-4">‚ù§Ô∏è</div>
                            <div>
                                <h3 class="font-bold text-mindOrange text-lg">PATHOS (La Experiencia)</h3>
                                <p class="text-sm text-gray-300">La emoci√≥n del vecino. ¬øSe siente escuchado? ¬øEl servicio reduce su ansiedad? Esto genera el voto.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Radar Chart -->
                    <div class="bg-white rounded-xl p-4 text-slate-800 shadow-2xl">
                        <h4 class="text-center font-bold mb-2">Diagn√≥stico T√≠pico Municipal vs. Mind-do</h4>
                        <div class="chart-container" style="height: 350px;">
                            <canvas id="radarChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 4: HIGH IMPACT SERVICES (SCATTER PLOT) -->
        <section>
            <h2 class="text-3xl font-heading font-bold text-mindDark mb-6">Matriz de Priorizaci√≥n de Servicios</h2>
            <p class="mb-6 text-lg text-slate-600">
                No todos los servicios tienen el mismo peso en la marca del alcalde. Mind-do prioriza la intervenci√≥n en servicios de <strong>"Alta Visibilidad / Alta Fricci√≥n"</strong>.
            </p>
            
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="lg:col-span-2 bg-white rounded-xl shadow-md p-6">
                     <!-- Plotly 3D Scatter container -->
                    <div id="plotlyDiv" class="w-full h-[500px]"></div>
                    <p class="text-xs text-center text-slate-400 mt-2">Interact√∫a con el gr√°fico (Girar/Zoom) para ver la relaci√≥n entre Presupuesto, Tiempo de Respuesta y Aprobaci√≥n Ciudadana.</p>
                </div>

                <div class="space-y-4">
                    <h3 class="font-bold text-mindBlue text-xl border-b pb-2">Top 3 Servicios Cr√≠ticos</h3>
                    
                    <div class="group cursor-pointer">
                        <div class="flex justify-between items-center bg-gray-50 p-3 rounded hover:bg-mindBlue hover:text-white transition">
                            <span class="font-semibold">1. Recolecci√≥n de Residuos</span>
                            <span class="bg-mindOrange text-white text-xs px-2 py-1 rounded">Cr√≠tico</span>
                        </div>
                        <p class="text-xs text-gray-500 mt-1 pl-2 group-hover:text-mindBlue">Impacto visual inmediato. Fallo = Crisis sanitaria y de imagen.</p>
                    </div>

                    <div class="group cursor-pointer">
                        <div class="flex justify-between items-center bg-gray-50 p-3 rounded hover:bg-mindBlue hover:text-white transition">
                            <span class="font-semibold">2. Seguridad Preventiva</span>
                            <span class="bg-mindOrange text-white text-xs px-2 py-1 rounded">Alto Pathos</span>
                        </div>
                        <p class="text-xs text-gray-500 mt-1 pl-2 group-hover:text-mindBlue">Alta carga emocional. Requiere visibilidad constante (Ethos).</p>
                    </div>

                    <div class="group cursor-pointer">
                        <div class="flex justify-between items-center bg-gray-50 p-3 rounded hover:bg-mindBlue hover:text-white transition">
                            <span class="font-semibold">3. Permisos de Obras/Patentes</span>
                            <span class="bg-green-500 text-white text-xs px-2 py-1 rounded">Alto Logos</span>
                        </div>
                        <p class="text-xs text-gray-500 mt-1 pl-2 group-hover:text-mindBlue">Motor econ√≥mico. La burocracia destruye la confianza empresarial.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 5: GEMINI AI TOOLS -->
        <section class="space-y-12">
            
            <!-- TOOL 1: STRATEGIC TRANSLATOR -->
            <div id="gemini-tool-1" class="bg-gradient-to-br from-indigo-50 to-white rounded-xl p-8 border-2 border-indigo-100 shadow-xl relative overflow-hidden">
                <div class="absolute top-0 right-0 p-4 opacity-10">
                    <span class="text-9xl">üìä</span>
                </div>
                <div class="flex items-center justify-center mb-6 relative z-10">
                    <span class="text-4xl mr-3">‚ú®</span>
                    <h2 class="text-3xl font-heading font-bold text-mindDark">Traductor Estrat√©gico (Logos)</h2>
                    <span class="text-4xl ml-3">‚ú®</span>
                </div>
                
                <p class="text-center max-w-2xl mx-auto mb-8 text-slate-700 relative z-10">
                    Transforma la ret√≥rica de campa√±a en planes operativos reales. Introduce una promesa pol√≠tica y obt√©n instant√°neamente los KPIs necesarios para cumplirla.
                </p>

                <div class="max-w-3xl mx-auto relative z-10">
                    <div class="mb-6">
                        <label for="promiseInput" class="block text-sm font-bold text-gray-700 mb-2">Promesa de Campa√±a:</label>
                        <div class="relative">
                            <input type="text" id="promiseInput" 
                                   class="w-full p-4 rounded-lg border border-gray-300 shadow-sm focus:ring-2 focus:ring-mindBlue focus:border-mindBlue transition text-lg" 
                                   placeholder="Ej: 'Comuna segura y calles limpias para todos...'">
                            <button onclick="generateOperationalMatrix()" 
                                    class="absolute right-2 top-2 bottom-2 bg-mindBlue hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-md shadow-md transition transform hover:scale-105 flex items-center">
                                <span>Traducir a Operaci√≥n</span>
                                <span id="loadingSpinner1" class="hidden ml-2">
                                    <svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                                </span>
                            </button>
                        </div>
                    </div>
                    <div id="aiOutputContainer1" class="hidden bg-white rounded-lg shadow-inner border border-gray-200 p-6 prose max-w-none">
                        <div id="aiOutputContent1" class="text-slate-700 space-y-4"></div>
                    </div>
                </div>
            </div>

            <!-- TOOL 2: CITIZEN IMPACT SIMULATOR -->
            <div id="gemini-tool-2" class="bg-gradient-to-br from-orange-50 to-white rounded-xl p-8 border-2 border-orange-100 shadow-xl relative overflow-hidden">
                <div class="absolute top-0 left-0 p-4 opacity-10">
                    <span class="text-9xl">üó£Ô∏è</span>
                </div>
                <div class="flex items-center justify-center mb-6 relative z-10">
                    <span class="text-4xl mr-3">üîÆ</span>
                    <h2 class="text-3xl font-heading font-bold text-mindDark">Simulador de Impacto Ciudadano (Pathos)</h2>
                    <span class="text-4xl ml-3">üîÆ</span>
                </div>
                
                <p class="text-center max-w-2xl mx-auto mb-8 text-slate-700 relative z-10">
                    Anticipa la crisis. Ingresa una medida o anuncio municipal y simula c√≥mo reaccionar√°n los arquetipos clave de tu comuna antes de hacerlo p√∫blico.
                </p>

                <div class="max-w-3xl mx-auto relative z-10">
                    <div class="mb-6">
                        <label for="measureInput" class="block text-sm font-bold text-gray-700 mb-2">Medida o Anuncio Municipal Propuesto:</label>
                        <div class="relative">
                            <textarea id="measureInput" rows="2"
                                   class="w-full p-4 rounded-lg border border-gray-300 shadow-sm focus:ring-2 focus:ring-mindOrange focus:border-mindOrange transition text-lg" 
                                   placeholder="Ej: 'Cierre de calle principal por 3 meses para reparaciones...'"></textarea>
                            <button onclick="simulateCitizenReaction()" 
                                    class="mt-3 w-full bg-mindOrange hover:bg-orange-600 text-white font-bold py-3 px-6 rounded-md shadow-md transition transform hover:scale-105 flex items-center justify-center">
                                <span>Simular Reacciones</span>
                                <span id="loadingSpinner2" class="hidden ml-2">
                                    <svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                                </span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Simulation Results Grid -->
                    <div id="aiOutputContainer2" class="hidden grid grid-cols-1 md:grid-cols-3 gap-4 mt-8">
                        <!-- Persona Cards will be injected here -->
                    </div>
                </div>
            </div>

            <!-- TOOL 3: CRISIS RESPONSE GENERATOR -->
            <div id="gemini-tool-3" class="bg-gradient-to-br from-red-50 to-white rounded-xl p-8 border-2 border-red-100 shadow-xl relative overflow-hidden">
                <div class="absolute bottom-0 right-0 p-4 opacity-10">
                    <span class="text-9xl">üéôÔ∏è</span>
                </div>
                <div class="flex items-center justify-center mb-6 relative z-10">
                    <span class="text-4xl mr-3">üì¢</span>
                    <h2 class="text-3xl font-heading font-bold text-mindDark">Generador de Respuesta a Crisis (Ethos)</h2>
                    <span class="text-4xl ml-3">üì¢</span>
                </div>
                
                <p class="text-center max-w-2xl mx-auto mb-8 text-slate-700 relative z-10">
                    Cuando estalla la crisis, el tono lo es todo. Genera una respuesta inmediata que proteja la autoridad del Alcalde y calme a la ciudadan√≠a.
                </p>

                <div class="max-w-3xl mx-auto relative z-10">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                        <div class="md:col-span-1">
                            <label for="toneInput" class="block text-sm font-bold text-gray-700 mb-2">Tono de Marca:</label>
                            <select id="toneInput" class="w-full p-4 rounded-lg border border-gray-300 shadow-sm focus:ring-2 focus:ring-mindRed focus:border-mindRed transition bg-white">
                                <option value="Emp√°tico y Cercano">‚ù§Ô∏è Emp√°tico y Cercano</option>
                                <option value="Autoritario y Firme">üëÆ Autoritario y Firme</option>
                                <option value="T√©cnico y Eficiente">‚öôÔ∏è T√©cnico y Eficiente</option>
                            </select>
                        </div>
                        <div class="md:col-span-2">
                            <label for="crisisInput" class="block text-sm font-bold text-gray-700 mb-2">Evento de Crisis:</label>
                            <input type="text" id="crisisInput" 
                                   class="w-full p-4 rounded-lg border border-gray-300 shadow-sm focus:ring-2 focus:ring-mindRed focus:border-mindRed transition" 
                                   placeholder="Ej: 'Paro de recolectores de basura indefinido...'">
                        </div>
                    </div>

                    <button onclick="generateCrisisResponse()" 
                            class="w-full bg-mindRed hover:bg-red-600 text-white font-bold py-3 px-6 rounded-md shadow-md transition transform hover:scale-105 flex items-center justify-center mb-6">
                        <span>Generar Comunicado Oficial</span>
                        <span id="loadingSpinner3" class="hidden ml-2">
                            <svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                        </span>
                    </button>
                    
                    <!-- Output Area -->
                    <div id="aiOutputContainer3" class="hidden bg-white rounded-lg shadow-inner border-l-4 border-mindRed p-6 relative">
                        <span class="absolute top-2 right-2 text-xs text-gray-400 font-mono">BORRADOR CONFIDENCIAL</span>
                        <h4 class="font-bold text-mindRed mb-2">Propuesta de Comunicado:</h4>
                        <div id="aiOutputContent3" class="text-slate-700 italic text-lg leading-relaxed"></div>
                    </div>
                </div>
            </div>

        </section>

        <!-- SECTION 6: SALES STRATEGY & PROCESS -->
        <section class="bg-blue-50 rounded-xl p-8 border border-blue-200">
            <h2 class="text-3xl font-heading font-bold text-mindDark mb-8 text-center">Estrategia de Ventas Mind-do</h2>
            <p class="text-center max-w-3xl mx-auto mb-10 text-slate-700">
                La venta no es t√©cnica, es pol√≠tica. No vendemos "manuales de procesos", vendemos <strong>Consistencia de Marca y Gobernabilidad</strong>.
            </p>

            <!-- Funnel Chart using Chart.js Horizontal Bar -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-10 items-center">
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h4 class="font-bold text-lg mb-4 text-center text-mindDark">Embudo de Conversi√≥n Municipal</h4>
                    <div class="chart-container">
                        <canvas id="funnelChart"></canvas>
                    </div>
                </div>

                <!-- Strategic Process Flow (HTML/Tailwind) -->
                <div>
                    <h4 class="font-bold text-lg mb-6 text-mindDark">El Pitch de Venta (Argumentario)</h4>
                    
                    <div class="space-y-0">
                        <!-- Step 1 -->
                        <div class="flex">
                            <div class="flex flex-col items-center mr-4">
                                <div class="w-8 h-8 bg-mindOrange rounded-full flex items-center justify-center text-white font-bold text-sm">1</div>
                                <div class="connector-line"></div>
                            </div>
                            <div class="pb-8">
                                <h5 class="font-bold text-mindOrange">Identificar la Promesa (Ethos)</h5>
                                <p class="text-sm text-slate-600">"Alcalde, usted prometi√≥ una comuna 'Segura y Limpia'. ¬øSus camiones y guardias est√°n entregando eso hoy?"</p>
                            </div>
                        </div>

                        <!-- Step 2 -->
                        <div class="flex">
                            <div class="flex flex-col items-center mr-4">
                                <div class="w-8 h-8 bg-mindBlue rounded-full flex items-center justify-center text-white font-bold text-sm">2</div>
                                <div class="connector-line"></div>
                            </div>
                            <div class="pb-8">
                                <h5 class="font-bold text-mindBlue">Revelar la Fricci√≥n (Pathos)</h5>
                                <p class="text-sm text-slate-600">Mostrar datos de reclamos. "Cada d√≠a que el servicio falla, su marca personal pierde valor."</p>
                            </div>
                        </div>

                        <!-- Step 3 -->
                        <div class="flex">
                            <div class="flex flex-col items-center mr-4">
                                <div class="w-8 h-8 bg-mindCyan rounded-full flex items-center justify-center text-white font-bold text-sm">3</div>
                            </div>
                            <div class="pb-2">
                                <h5 class="font-bold text-mindCyan">Optimizar con M√©todo (Logos)</h5>
                                <p class="text-sm text-slate-600">Implementar gu√≠as Mind-do. "Estandarizamos la operaci√≥n para que su promesa se cumpla en autom√°tico."</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-mindDark text-white py-12 mt-12">
        <div class="max-w-7xl mx-auto px-6 text-center">
            <h2 class="text-2xl font-heading font-bold mb-4">Mind-do</h2>
            <p class="text-gray-400 text-sm mb-6">Transformando promesas pol√≠ticas en realidades operativas.</p>
            <div class="border-t border-gray-700 pt-6">
                <p class="text-xs text-gray-500">&copy; 2023 Mind-do Analytics. Documento de Estrategia Interna.</p>
            </div>
        </div>
    </footer>

    <!-- SCRIPT SECTION -->
    <script>
        // --- GEMINI API INTEGRATION ---
        const apiKey = ""; // API Key provided by runtime environment

        // TOOL 1: Strategic Translator
        async function generateOperationalMatrix() {
            const promiseInput = document.getElementById('promiseInput').value;
            const outputContainer = document.getElementById('aiOutputContainer1');
            const outputContent = document.getElementById('aiOutputContent1');
            const loadingSpinner = document.getElementById('loadingSpinner1');

            if (!promiseInput.trim()) {
                alert("Por favor ingrese una promesa de campa√±a.");
                return;
            }

            loadingSpinner.classList.remove('hidden');
            outputContainer.classList.add('hidden');

            const systemPrompt = `Act√∫a como un Consultor Estrat√©gico Senior de 'Mind-do'.
            Tarea: Transforma una "Promesa de Campa√±a" en una "Matriz Operativa".
            Responde en Markdown estructurado:
            1. üß† **Diagn√≥stico**: An√°lisis breve.
            2. üìä **KPIs Cr√≠ticos**: 3 indicadores num√©ricos.
            3. üö® **Protocolo Acci√≥n**: Qu√© hacer ya.
            4. ‚ö†Ô∏è **Riesgo**: Impacto si falla.`;

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: `Promesa: "${promiseInput}"` }] }],
                        systemInstruction: { parts: [{ text: systemPrompt }] }
                    })
                });

                if (!response.ok) throw new Error('API Error');
                const data = await response.json();
                const aiText = data.candidates[0].content.parts[0].text;

                outputContent.innerHTML = marked.parse(aiText);
                outputContainer.classList.remove('hidden');

            } catch (error) {
                console.error(error);
                alert("Error al conectar con la IA.");
            } finally {
                loadingSpinner.classList.add('hidden');
            }
        }

        // TOOL 2: Citizen Impact Simulator
        async function simulateCitizenReaction() {
            const measureInput = document.getElementById('measureInput').value;
            const outputContainer = document.getElementById('aiOutputContainer2');
            const loadingSpinner = document.getElementById('loadingSpinner2');

            if (!measureInput.trim()) {
                alert("Por favor ingrese una medida municipal.");
                return;
            }

            loadingSpinner.classList.remove('hidden');
            outputContainer.classList.add('hidden');

            // Force JSON response structure
            const systemPrompt = `Act√∫a como un analista pol√≠tico y soci√≥logo experto en comunas chilenas.
            Simula la reacci√≥n de 3 arquetipos ante la medida municipal ingresada.
            Devuelve SOLO un objeto JSON con esta estructura exacta, sin markdown extra:
            {
                "personas": [
                    {
                        "name": "La Vecina Hist√≥rica",
                        "desc": "Conservadora, valora el orden y la tradici√≥n.",
                        "reaction": "Frase t√≠pica que dir√≠a...",
                        "sentiment": "Positivo" | "Neutro" | "Negativo",
                        "icon": "üëµ"
                    },
                    {
                        "name": "El Comerciante Local",
                        "desc": "Pragm√°tico, le preocupa sus ventas y el acceso.",
                        "reaction": "Frase t√≠pica que dir√≠a...",
                        "sentiment": "Positivo" | "Neutro" | "Negativo",
                        "icon": "üè™"
                    },
                    {
                        "name": "El Joven Activista",
                        "desc": "Progresista, enfocado en medio ambiente y cultura.",
                        "reaction": "Frase t√≠pica que dir√≠a...",
                        "sentiment": "Positivo" | "Neutro" | "Negativo",
                        "icon": "üö≤"
                    }
                ]
            }`;

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: `Medida: "${measureInput}"` }] }],
                        systemInstruction: { parts: [{ text: systemPrompt }] },
                        generationConfig: { responseMimeType: "application/json" }
                    })
                });

                if (!response.ok) throw new Error('API Error');
                const data = await response.json();
                const result = JSON.parse(data.candidates[0].content.parts[0].text);

                // Build HTML Cards
                let html = '';
                result.personas.forEach(p => {
                    let sentimentColor = p.sentiment === 'Positivo' ? 'text-green-600 bg-green-50 border-green-200' : 
                                         p.sentiment === 'Negativo' ? 'text-red-600 bg-red-50 border-red-200' : 
                                         'text-yellow-600 bg-yellow-50 border-yellow-200';
                    
                    html += `
                        <div class="bg-white rounded-lg shadow-md p-4 border border-gray-200 flex flex-col h-full">
                            <div class="flex items-center mb-3">
                                <span class="text-3xl mr-3">${p.icon}</span>
                                <div>
                                    <h4 class="font-bold text-slate-800 text-sm">${p.name}</h4>
                                    <p class="text-xs text-slate-500">${p.desc}</p>
                                </div>
                            </div>
                            <div class="flex-grow">
                                <p class="italic text-slate-600 text-sm mb-3">"${p.reaction}"</p>
                            </div>
                            <div class="mt-auto pt-3 border-t border-gray-100 flex justify-between items-center">
                                <span class="text-xs font-bold text-gray-400">Sentimiento:</span>
                                <span class="text-xs font-bold px-2 py-1 rounded-full border ${sentimentColor}">${p.sentiment}</span>
                            </div>
                        </div>
                    `;
                });

                outputContainer.innerHTML = html;
                outputContainer.classList.remove('hidden');

            } catch (error) {
                console.error(error);
                alert("Error al simular reacciones.");
            } finally {
                loadingSpinner.classList.add('hidden');
            }
        }

        // TOOL 3: Crisis Response Generator
        async function generateCrisisResponse() {
            const crisisInput = document.getElementById('crisisInput').value;
            const toneInput = document.getElementById('toneInput').value;
            const outputContainer = document.getElementById('aiOutputContainer3');
            const outputContent = document.getElementById('aiOutputContent3');
            const loadingSpinner = document.getElementById('loadingSpinner3');

            if (!crisisInput.trim()) {
                alert("Por favor describe el evento de crisis.");
                return;
            }

            loadingSpinner.classList.remove('hidden');
            outputContainer.classList.add('hidden');

            const systemPrompt = `Act√∫a como un Jefe de Gabinete y Experto en Comunicaci√≥n de Crisis.
            Tarea: Redacta un comunicado oficial breve (m√°ximo 80 palabras) para un Alcalde enfrentando una crisis.
            Objetivo: Reconocer el problema pero mantener el control y la autoridad.
            
            Usa el tono solicitado:
            - Emp√°tico: Centrado en las personas afectadas.
            - Autoritario: Centrado en el orden y las consecuencias.
            - T√©cnico: Centrado en soluciones y plazos.`;

            const userPrompt = `Crisis: "${crisisInput}". Tono: "${toneInput}".`;

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: userPrompt }] }],
                        systemInstruction: { parts: [{ text: systemPrompt }] }
                    })
                });

                if (!response.ok) throw new Error('API Error');
                const data = await response.json();
                const aiText = data.candidates[0].content.parts[0].text;

                outputContent.innerText = `"${aiText}"`; // Use innerText to keep it as raw text block
                outputContainer.classList.remove('hidden');

            } catch (error) {
                console.error(error);
                alert("Error al generar el comunicado.");
            } finally {
                loadingSpinner.classList.add('hidden');
            }
        }

        // --- UTILITY FUNCTIONS ---

        // Label Wrapping Function (Required for Chart.js)
        function splitLabel(label, maxLength = 16) {
            if (label.length <= maxLength) return label;
            const words = label.split(' ');
            const lines = [];
            let currentLine = words[0];

            for (let i = 1; i < words.length; i++) {
                if ((currentLine + " " + words[i]).length <= maxLength) {
                    currentLine += " " + words[i];
                } else {
                    lines.push(currentLine);
                    currentLine = words[i];
                }
            }
            lines.push(currentLine);
            return lines;
        }

        // Shared Tooltip Configuration
        const commonTooltipOptions = {
            callbacks: {
                title: function(tooltipItems) {
                    const item = tooltipItems[0];
                    let label = item.chart.data.labels[item.dataIndex];
                    if (Array.isArray(label)) {
                        return label.join(' ');
                    } else {
                        return label;
                    }
                }
            }
        };

        // Shared Chart Options
        const baseChartOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'bottom',
                    labels: {
                        font: { family: 'Roboto' },
                        usePointStyle: true
                    }
                },
                tooltip: commonTooltipOptions
            }
        };

        // --- WAIT FOR RESOURCES TO LOAD ---
        document.addEventListener('DOMContentLoaded', function() {

            // --- CHART 1: THE GAP (Bar Chart) ---
            const ctxGap = document.getElementById('gapChart').getContext('2d');
            const gapLabels = ['Seguridad', 'Limpieza', '√Åreas Verdes', 'Tr√°mites', 'Salud Primaria'];
            const processedGapLabels = gapLabels.map(l => splitLabel(l));

            new Chart(ctxGap, {
                type: 'bar',
                data: {
                    labels: processedGapLabels,
                    datasets: [
                        {
                            label: 'Expectativa (Promesa Campa√±a)',
                            data: [95, 90, 85, 80, 88],
                            backgroundColor: '#2563EB', // Blue
                            borderRadius: 4
                        },
                        {
                            label: 'Satisfacci√≥n Real (Operaci√≥n)',
                            data: [45, 60, 55, 30, 65],
                            backgroundColor: '#F97316', // Orange
                            borderRadius: 4
                        }
                    ]
                },
                options: {
                    ...baseChartOptions,
                    plugins: {
                        ...baseChartOptions.plugins,
                        title: {
                            display: true,
                            text: 'Brecha de Expectativa vs. Realidad'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            title: { display: true, text: 'Nivel (%)' }
                        }
                    }
                }
            });

            // --- CHART 2: BENCHMARKING (Bubble Chart) ---
            const ctxBench = document.getElementById('benchmarkChart').getContext('2d');
            
            new Chart(ctxBench, {
                type: 'bubble',
                data: {
                    datasets: [
                        {
                            label: 'Mind-do',
                            data: [{x: 40, y: 90, r: 25}], // Med Cost, High Political, Specific Focus
                            backgroundColor: '#06B6D4',
                            borderColor: '#06B6D4'
                        },
                        {
                            label: 'Consultoras Big 4',
                            data: [{x: 90, y: 30, r: 35}], // High Cost, Low Specific Political alignment, Huge Scope
                            backgroundColor: '#94A3B8',
                            borderColor: '#64748B'
                        },
                        {
                            label: 'GovTech Apps',
                            data: [{x: 20, y: 50, r: 15}], // Low Cost, Med alignment, Small Scope
                            backgroundColor: '#F97316',
                            borderColor: '#EA580C'
                        },
                        {
                            label: 'Planificaci√≥n Urbana',
                            data: [{x: 60, y: 40, r: 20}],
                            backgroundColor: '#A855F7',
                            borderColor: '#9333EA'
                        }
                    ]
                },
                options: {
                    ...baseChartOptions,
                    plugins: {
                        ...baseChartOptions.plugins,
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + 
                                        ': Costo ' + context.raw.x + 
                                        ', Enfoque Pol√≠tico ' + context.raw.y;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            title: { display: true, text: 'Costo de Implementaci√≥n (Bajo -> Alto)' },
                            min: 0, max: 100
                        },
                        y: {
                            title: { display: true, text: 'Alineaci√≥n Estrategia Pol√≠tica (Baja -> Alta)' },
                            min: 0, max: 100
                        }
                    }
                }
            });

            // --- CHART 3: RADAR CHART (Triangle) ---
            const ctxRadar = document.getElementById('radarChart').getContext('2d');
            
            new Chart(ctxRadar, {
                type: 'radar',
                data: {
                    labels: ['ETHOS (Confianza)', 'PATHOS (Satisfacci√≥n)', 'LOGOS (Eficiencia)', 'Transparencia', 'Rapidez', 'Empat√≠a'],
                    datasets: [{
                        label: 'Municipio Promedio',
                        data: [70, 40, 30, 60, 25, 35],
                        fill: true,
                        backgroundColor: 'rgba(148, 163, 184, 0.2)',
                        borderColor: '#94A3B8',
                        pointBackgroundColor: '#94A3B8'
                    }, {
                        label: 'Municipio con Mind-do',
                        data: [90, 85, 95, 90, 88, 80],
                        fill: true,
                        backgroundColor: 'rgba(37, 99, 235, 0.2)',
                        borderColor: '#2563EB',
                        pointBackgroundColor: '#2563EB'
                    }]
                },
                options: {
                    ...baseChartOptions,
                    scales: {
                        r: {
                            angleLines: { color: '#e2e8f0' },
                            grid: { color: '#e2e8f0' },
                            pointLabels: { font: { size: 12, family: 'Roboto' } },
                            suggestedMin: 0,
                            suggestedMax: 100
                        }
                    }
                }
            });

            // --- CHART 4: PLOTLY 3D SCATTER (Advanced Analysis) ---
            // Data simulation: Budget vs Response Time vs Approval
            const trace1 = {
                x: [10, 20, 30, 40, 50, 60, 70, 80, 90, 25, 45, 65, 85, 15, 35], // Budget
                y: [90, 80, 70, 60, 50, 40, 30, 20, 10, 75, 55, 35, 15, 85, 65], // Response Time (High is bad)
                z: [20, 30, 40, 55, 60, 70, 80, 90, 95, 35, 58, 75, 88, 25, 48], // Approval Rating
                mode: 'markers',
                marker: {
                    size: 8,
                    color: [20, 30, 40, 55, 60, 70, 80, 90, 95, 35, 58, 75, 88, 25, 48],
                    colorscale: 'Viridis',
                    opacity: 0.8
                },
                type: 'scatter3d',
                text: ['Municipio A', 'Municipio B', 'Municipio C', 'Municipio D', 'Municipio E', 'Optimizado Mind-do', 'Referente', 'L√≠der', 'Utop√≠a', 'Caso X', 'Caso Y', 'Caso Z', 'Caso W', 'Caso V', 'Caso U'],
                hoverinfo: 'text+x+y+z'
            };

            const layoutPlotly = {
                margin: {l: 0, r: 0, b: 0, t: 0},
                scene: {
                    xaxis: { title: 'Presupuesto Inv.' },
                    yaxis: { title: 'Tiempo Respuesta (Horas)' },
                    zaxis: { title: 'Aprobaci√≥n (%)' },
                    camera: {
                        eye: {x: 1.5, y: 1.5, z: 1.5}
                    }
                },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)'
            };

            // Use WebGL implicitly with scatter3d
            Plotly.newPlot('plotlyDiv', [trace1], layoutPlotly, {responsive: true, displayModeBar: false});


            // --- CHART 5: FUNNEL CHART (Chart.js Horizontal Bar) ---
            const ctxFunnel = document.getElementById('funnelChart').getContext('2d');
            const funnelLabels = splitLabel('Prospecci√≥n Pol√≠tica,Diagn√≥stico de Brecha,Propuesta Branding+Ops,Implementaci√≥n Gu√≠as,Medici√≥n de Impacto', 20);

            new Chart(ctxFunnel, {
                type: 'bar',
                data: {
                    labels: ['Prospecci√≥n', 'Diagn√≥stico', 'Propuesta', 'Implementaci√≥n', 'Reelecci√≥n'],
                    datasets: [{
                        label: 'Tasa de Conversi√≥n (%)',
                        data: [100, 75, 50, 40, 35],
                        backgroundColor: [
                            '#94A3B8', // Gray
                            '#06B6D4', // Cyan
                            '#2563EB', // Blue
                            '#F97316', // Orange
                            '#10B981'  // Green (Success)
                        ],
                        barPercentage: 0.8
                    }]
                },
                options: {
                    indexAxis: 'y', // Horizontal bar
                    ...baseChartOptions,
                    plugins: {
                        ...baseChartOptions.plugins,
                        legend: { display: false }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });

        }); // End DOMContentLoaded
    </script>
</body>
</html>
